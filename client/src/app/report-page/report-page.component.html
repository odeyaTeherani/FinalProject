<form *ngIf="reportForm" [formGroup]="reportForm">

  <div fxLayout="row wrap">

    <div [fxFlex]="50" [fxFlex.xs]="100">

      <div fxLayout="column">
        <!--'legacy' | 'standard' | 'fill' | 'outline'-->

        <mat-form-field fxFlex="20" [appearance]="'outline'">
          <mat-label>Event Type</mat-label>
          <mat-select [formControlName]="'eventType'">
            <mat-option *ngFor="let type of typeOptions"
                        [value]="type.id">
              {{type.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>


        <mat-form-field [appearance]="'outline'" fxFlex="25">
          <mat-label>Car Number</mat-label>
          <input [formControlName]="'carNumber'" [readonly]="viewMode" matInput type="text"/>
          <!--          <mat-error *ngIf="!reportForm.controls['carNumber'].valid">*car number required - contains only number</mat-error>-->
        </mat-form-field>

        <mat-form-field [appearance]="'outline'" fxFlex="25">
          <mat-label>Location</mat-label>
          <input matInput
                 aria-label="Number"
                 appGooglePlace
                 [formControlName]="'locationFiled'" [readonly]="viewMode"
                 placeholder=""/>
          <!--                 (locationSelected)="reportForm.controls['locationFiled'].setValue($event)"-->
        </mat-form-field>

        <mat-form-field [appearance]="'outline'" fxFlex="25">
          <mat-label>Severity Level</mat-label>
          <mat-select [formControlName]="'severityLevel'">
            <mat-option *ngFor="let level of severityOption"
                        [value]="level">
              {{level}}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field [appearance]="'outline'" fxFlex="25">
          <mat-label>Number of Evacuated injured</mat-label>
          <input [formControlName]="'numberOfEvacuatedInjured'" [readonly]="viewMode" matInput type="number" min="0"/>
        </mat-form-field>


      </div>

    </div>

    <div [fxFlex]="50" [fxFlex.xs]="100" class="pl-1">
      <!--<input #file type="file" accept='image/*' (change)="preview(file.files)" />-->

     <div fxLayout="row" fxLayoutAlign="center" *ngIf="!viewMode">
      <button mat-raised-button
              [color]="'primary'"
              (click)="cameraInput.click()">
        Upload image
        <mat-icon>camera</mat-icon>
      </button>
     </div>

      <input #cameraInput style="display: none" type="file"
             capture="camera"
             accept="image/*"
             id="cameraInput"
             name="cameraInput"
             (change)="onFileSelected($event)">

      <div fxLayout="row wrap" fxLayoutAlign="center">
        <ng-container *ngFor="let image of images;">
          <img  class="uploaded-image"  [src]="image"  alt="image" sizes="100px"/>
        </ng-container>
      </div>
      <!-- <img width="100%" src="https://www.telugu360.com/wp-content/uploads/2017/09/JLK-1.jpg">-->
    </div>

  </div>

  <div fxLayout="row" fxLayoutAlign="center" class="mt-1">
    <mat-form-field [appearance]="'outline'" fxFlex="100">
      <mat-label>Note</mat-label>
      <textarea [readonly]="viewMode"
        [formControlName]="'note'"
                matInput
                cdkTextareaAutosize
                cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5">
      </textarea>
    </mat-form-field>
  </div>

  <agm-map *ngIf="locationCoordinates != null"
          [latitude]="locationCoordinates.latitude"
          [longitude]="locationCoordinates.longitude"
          [zoom]="zoom" >
    <agm-marker
            [latitude]="locationCoordinates.latitude"
            [longitude]="locationCoordinates.longitude">
    </agm-marker>
  </agm-map>

  <div *ngIf="!viewMode" fxLayout="row" fxLayoutAlign="center" class="mt-1">
    <button [disabled]="!reportForm.valid" (click)="submit()" mat-raised-button color="primary">Submit</button>
  </div>

</form>



